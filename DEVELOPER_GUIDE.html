<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="generator" content="MarkBind 5.5.3">
    <meta name="viewport" content="width=device-width, initial-scale=1"><title>AIS Web Portal -  -  | Documentation</title> <link rel="stylesheet" href="/AIS-Web-Portal/markbind/css/bootstrap.min.css"> <link rel="stylesheet" href="/AIS-Web-Portal/markbind/fontawesome/css/all.min.css"> <link rel="stylesheet" href="/AIS-Web-Portal/markbind/glyphicons/css/bootstrap-glyphicons.min.css"><link rel="stylesheet" href="/AIS-Web-Portal/markbind/css/codeblock-dark.min.css"><link rel="stylesheet" href="/AIS-Web-Portal/markbind/css/markbind.min.css"><link rel="stylesheet" href="/AIS-Web-Portal/plugins/markbind-plugin-anchors/markbind-plugin-anchors.css"><link rel="stylesheet" href="/AIS-Web-Portal/plugins/markbind-plugin-tree/markbind-plugin-tree.css">
    
  <link rel="stylesheet" href="/AIS-Web-Portal/stylesheets/main.css">
</head>
<script>
  const baseUrl = '/AIS-Web-Portal'
</script>
<body >
<div id="app" data-server-rendered="true"><header sticky=""><div data-v-7c0fd418><nav class="navbar navbar-expand-md d-print-none navbar-dark bg-dark" data-v-7c0fd418><div class="container-fluid" data-v-7c0fd418><div class="navbar-left" data-v-7c0fd418><a href="/AIS-Web-Portal/index.html" title="Home" class="navbar-brand" data-v-7c0fd418>AIS Web Portal</a></div> <div class="navbar-default" data-v-7c0fd418><ul class="navbar-nav me-auto mt-2 mt-lg-0" data-v-7c0fd418> <li data-v-7c0fd418><a href="/AIS-Web-Portal/index.html" class="nav-link" data-v-7c0fd418>Home</a></li> <li data-v-7c0fd418><a href="/AIS-Web-Portal/contents/getting-started.html" class="nav-link" data-v-7c0fd418>Getting Started</a></li> <li data-v-7c0fd418><a href="/AIS-Web-Portal/contents/architecture.html" class="nav-link" data-v-7c0fd418>Architecture</a></li> <li class="nav-link dropdown" data-v-99624572><a role="button" data-bs-toggle="dropdown" class="dropdown-toggle nav-link" data-v-99624572>Components <span data-v-99624572></span></a> <ul class="dropdown-menu" data-v-99624572> <dropdown-header data-v-99624572>Map Components</dropdown-header> <li data-v-99624572><a href="/AIS-Web-Portal/contents/components/map.html" class="dropdown-item" data-v-99624572>Map</a></li> <li data-v-99624572><a href="/AIS-Web-Portal/contents/components/MapWithSearchbar.html" class="dropdown-item" data-v-99624572>MapWithSearchbar</a></li> <li data-v-99624572><a href="/AIS-Web-Portal/contents/components/MapControls.html" class="dropdown-item" data-v-99624572>MapControls</a></li> <li data-v-99624572><a href="/AIS-Web-Portal/contents/components/LayerSelect.html" class="dropdown-item" data-v-99624572>LayerSelect</a></li> <li data-v-99624572><a href="/AIS-Web-Portal/contents/components/VesselLayer.html" class="dropdown-item" data-v-99624572>VesselLayer</a></li> <li data-v-99624572><a href="/AIS-Web-Portal/contents/components/TerminalLayer.html" class="dropdown-item" data-v-99624572>TerminalLayer</a></li> <li data-v-99624572><a href="/AIS-Web-Portal/contents/components/Searchbar.html" class="dropdown-item" data-v-99624572>Searchbar</a></li> <dropdown-divider data-v-99624572></dropdown-divider> <pre data-v-99624572><code data-v-99624572>  &lt;dropdown-header&gt;Vessel Components&lt;/dropdown-header&gt;
  &lt;li&gt;&lt;a href=&quot;/AIS-Web-Portal/contents/components/vessel.html&quot; class=&quot;dropdown-item&quot;&gt;Vessel Overview&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;/AIS-Web-Portal/contents/components/VesselInfoPanel.html&quot; class=&quot;dropdown-item&quot;&gt;VesselInfoPanel&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;/AIS-Web-Portal/contents/components/VesselInformationPanel.html&quot; class=&quot;dropdown-item&quot;&gt;VesselInformationPanel&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;/AIS-Web-Portal/contents/components/VesselInformationFloatingActionButton.html&quot; class=&quot;dropdown-item&quot;&gt;VesselInformationFloatingActionButton&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;/AIS-Web-Portal/contents/components/VesselActivityTable.html&quot; class=&quot;dropdown-item&quot;&gt;VesselActivityTable&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;/AIS-Web-Portal/contents/components/VesselActivitySingle.html&quot; class=&quot;dropdown-item&quot;&gt;VesselActivitySingle&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;/AIS-Web-Portal/contents/components/VesselActivitySingleWithArrow.html&quot; class=&quot;dropdown-item&quot;&gt;VesselActivitySingleWithArrow&lt;/a&gt;&lt;/li&gt;
  &lt;dropdown-divider&gt;&lt;/dropdown-divider&gt;
  
  &lt;dropdown-header&gt;Port Components&lt;/dropdown-header&gt;
  &lt;li&gt;&lt;a href=&quot;/AIS-Web-Portal/contents/components/port.html&quot; class=&quot;dropdown-item&quot;&gt;Port Overview&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;/AIS-Web-Portal/contents/components/PortServiceTable.html&quot; class=&quot;dropdown-item&quot;&gt;PortServiceTable&lt;/a&gt;&lt;/li&gt;
  &lt;dropdown-divider&gt;&lt;/dropdown-divider&gt;
  
  &lt;dropdown-header&gt;Utility Components&lt;/dropdown-header&gt;
  &lt;li&gt;&lt;a href=&quot;/AIS-Web-Portal/contents/components/DatePicker.html&quot; class=&quot;dropdown-item&quot;&gt;DatePicker&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;/AIS-Web-Portal/contents/components/TimeSlider.html&quot; class=&quot;dropdown-item&quot;&gt;TimeSlider&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;/AIS-Web-Portal/contents/components/Alert.html&quot; class=&quot;dropdown-item&quot;&gt;Alert&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;/AIS-Web-Portal/contents/components/AutoLoginNotification.html&quot; class=&quot;dropdown-item&quot;&gt;AutoLoginNotification&lt;/a&gt;&lt;/li&gt;
&lt;/dropdown&gt;
&lt;li&gt;&lt;a href=&quot;/AIS-Web-Portal/contents/api.html&quot; class=&quot;nav-link&quot;&gt;API&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;/AIS-Web-Portal/contents/deployment.html&quot; class=&quot;nav-link&quot;&gt;Deployment&lt;/a&gt;&lt;/li&gt;
&lt;li slot=&quot;right&quot;&gt;
  &lt;form class=&quot;navbar-form&quot;&gt;
    &lt;searchbar :data=&quot;searchData&quot; placeholder=&quot;Search&quot; :on-hit=&quot;searchCallback&quot; menu-align-right&gt;&lt;/searchbar&gt;
  &lt;/form&gt;
&lt;/li&gt;
</code></pre></ul></li></ul></div> <!----></div></nav> <div class="lower-navbar-container" style="display:none;" data-v-7c0fd418><!----> <!----></div></div></header> <div id="flex-body"><nav id="site-nav" data-v-e6005420><div class="site-nav-top" data-v-e6005420><div class="fw-bold mb-2" style="font-size:1.25rem;" data-v-e6005420>Contents</div></div> <div class="nav-component slim-scroll" data-v-e6005420><div class="site-nav-root"><ul class="site-nav-list site-nav-list-root" data-v-e6005420><li data-v-e6005420><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-0" data-v-e6005420><a href="/AIS-Web-Portal/index.html" data-v-e6005420>Home üè†</a></div></li> <li data-v-e6005420><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-0" data-v-e6005420><a href="/AIS-Web-Portal/contents/getting-started.html" data-v-e6005420>Getting Started</a></div></li> <li data-v-e6005420><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-0" data-v-e6005420><a href="/AIS-Web-Portal/contents/architecture.html" data-v-e6005420>Architecture</a></div></li> <li data-v-e6005420><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-0" data-v-e6005420>Components 

<div class="site-nav-dropdown-btn-container" data-v-e6005420><i onclick="handleSiteNavClick(this.parentNode.parentNode, false); event.stopPropagation();" class="site-nav-dropdown-btn-icon site-nav-rotate-icon" data-v-e6005420><span aria-hidden="true" class="glyphicon glyphicon-menu-down" data-v-e6005420></span></i></div></div><ul class="site-nav-dropdown-container site-nav-dropdown-container-open site-nav-list" data-v-e6005420><li data-v-e6005420><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-1" data-v-e6005420>Map Components

<div class="site-nav-dropdown-btn-container" data-v-e6005420><i onclick="handleSiteNavClick(this.parentNode.parentNode, false); event.stopPropagation();" class="site-nav-dropdown-btn-icon" data-v-e6005420><span aria-hidden="true" class="glyphicon glyphicon-menu-down" data-v-e6005420></span></i></div></div><ul class="site-nav-dropdown-container site-nav-list" data-v-e6005420><li data-v-e6005420><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-2" data-v-e6005420><a href="/AIS-Web-Portal/contents/components/map.html" data-v-e6005420>Map</a></div></li> <li data-v-e6005420><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-2" data-v-e6005420><a href="/AIS-Web-Portal/contents/components/MapWithSearchbar.html" data-v-e6005420>MapWithSearchbar</a></div></li> <li data-v-e6005420><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-2" data-v-e6005420><a href="/AIS-Web-Portal/contents/components/MapControls.html" data-v-e6005420>MapControls</a></div></li> <li data-v-e6005420><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-2" data-v-e6005420><a href="/AIS-Web-Portal/contents/components/LayerSelect.html" data-v-e6005420>LayerSelect</a></div></li> <li data-v-e6005420><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-2" data-v-e6005420><a href="/AIS-Web-Portal/contents/components/VesselLayer.html" data-v-e6005420>VesselLayer</a></div></li> <li data-v-e6005420><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-2" data-v-e6005420><a href="/AIS-Web-Portal/contents/components/TerminalLayer.html" data-v-e6005420>TerminalLayer</a></div></li> <li data-v-e6005420><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-2" data-v-e6005420><a href="/AIS-Web-Portal/contents/components/Searchbar.html" data-v-e6005420>Searchbar</a></div></li></ul></li> <li data-v-e6005420><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-1" data-v-e6005420>Vessel Components

<div class="site-nav-dropdown-btn-container" data-v-e6005420><i onclick="handleSiteNavClick(this.parentNode.parentNode, false); event.stopPropagation();" class="site-nav-dropdown-btn-icon" data-v-e6005420><span aria-hidden="true" class="glyphicon glyphicon-menu-down" data-v-e6005420></span></i></div></div><ul class="site-nav-dropdown-container site-nav-list" data-v-e6005420><li data-v-e6005420><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-2" data-v-e6005420><a href="/AIS-Web-Portal/contents/components/vessel.html" data-v-e6005420>Vessel Overview</a></div></li> <li data-v-e6005420><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-2" data-v-e6005420><a href="/AIS-Web-Portal/contents/components/VesselInfoPanel.html" data-v-e6005420>VesselInfoPanel</a></div></li> <li data-v-e6005420><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-2" data-v-e6005420><a href="/AIS-Web-Portal/contents/components/VesselInformationPanel.html" data-v-e6005420>VesselInformationPanel</a></div></li> <li data-v-e6005420><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-2" data-v-e6005420><a href="/AIS-Web-Portal/contents/components/VesselInformationFloatingActionButton.html" data-v-e6005420>VesselInformationFloatingActionButton</a></div></li> <li data-v-e6005420><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-2" data-v-e6005420><a href="/AIS-Web-Portal/contents/components/VesselActivityTable.html" data-v-e6005420>VesselActivityTable</a></div></li> <li data-v-e6005420><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-2" data-v-e6005420><a href="/AIS-Web-Portal/contents/components/VesselActivitySingle.html" data-v-e6005420>VesselActivitySingle</a></div></li> <li data-v-e6005420><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-2" data-v-e6005420><a href="/AIS-Web-Portal/contents/components/VesselActivitySingleWithArrow.html" data-v-e6005420>VesselActivitySingleWithArrow</a></div></li></ul></li> <li data-v-e6005420><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-1" data-v-e6005420>Port Components

<div class="site-nav-dropdown-btn-container" data-v-e6005420><i onclick="handleSiteNavClick(this.parentNode.parentNode, false); event.stopPropagation();" class="site-nav-dropdown-btn-icon" data-v-e6005420><span aria-hidden="true" class="glyphicon glyphicon-menu-down" data-v-e6005420></span></i></div></div><ul class="site-nav-dropdown-container site-nav-list" data-v-e6005420><li data-v-e6005420><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-2" data-v-e6005420><a href="/AIS-Web-Portal/contents/components/port.html" data-v-e6005420>Port Overview</a></div></li> <li data-v-e6005420><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-2" data-v-e6005420><a href="/AIS-Web-Portal/contents/components/PortServiceTable.html" data-v-e6005420>PortServiceTable</a></div></li></ul></li> <li data-v-e6005420><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-1" data-v-e6005420>Utility Components

<div class="site-nav-dropdown-btn-container" data-v-e6005420><i onclick="handleSiteNavClick(this.parentNode.parentNode, false); event.stopPropagation();" class="site-nav-dropdown-btn-icon" data-v-e6005420><span aria-hidden="true" class="glyphicon glyphicon-menu-down" data-v-e6005420></span></i></div></div><ul class="site-nav-dropdown-container site-nav-list" data-v-e6005420><li data-v-e6005420><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-2" data-v-e6005420><a href="/AIS-Web-Portal/contents/components/DatePicker.html" data-v-e6005420>DatePicker</a></div></li> <li data-v-e6005420><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-2" data-v-e6005420><a href="/AIS-Web-Portal/contents/components/TimeSlider.html" data-v-e6005420>TimeSlider</a></div></li> <li data-v-e6005420><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-2" data-v-e6005420><a href="/AIS-Web-Portal/contents/components/Alert.html" data-v-e6005420>Alert</a></div></li> <li data-v-e6005420><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-2" data-v-e6005420><a href="/AIS-Web-Portal/contents/components/AutoLoginNotification.html" data-v-e6005420>AutoLoginNotification</a></div></li></ul></li></ul></li> <li data-v-e6005420><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-0" data-v-e6005420><a href="/AIS-Web-Portal/contents/api.html" data-v-e6005420>API</a></div></li> <li data-v-e6005420><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-0" data-v-e6005420><a href="/AIS-Web-Portal/contents/deployment.html" data-v-e6005420>Deployment</a></div></li> <!----></ul></div></div> <!----></nav> <div id="content-wrapper"><div data-v-ef898034><nav aria-label="breadcrumb" class="breadcrumb-divider" data-v-ef898034><ol class="breadcrumb" data-v-ef898034><li class="notlink breadcrumb-marker" data-v-ef898034>
        ‚Ä∫‚Ä∫¬†¬†
      </li> </ol></nav></div> <h1 id="ais-web-portal-developer-guide">AIS Web Portal - Developer Guide<a href="#ais-web-portal-developer-guide" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h1> <h2 id="table-of-contents">üìö Table of Contents<a href="#table-of-contents" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h2> <ol><li><a href="#introduction">Introduction</a></li> <li><a href="#project-architecture">Project Architecture</a></li> <li><a href="#development-environment-setup">Development Environment Setup</a></li> <li><a href="#core-components">Core Components</a></li> <li><a href="#data-flow">Data Flow</a></li> <li><a href="#api-integration">API Integration</a></li> <li><a href="#authentication">Authentication</a></li> <li><a href="#map-visualization">Map Visualization</a></li> <li><a href="#state-management">State Management</a></li> <li><a href="#testing">Testing</a></li> <li><a href="#deployment">Deployment</a></li> <li><a href="#best-practices">Best Practices</a></li> <li><a href="#troubleshooting">Troubleshooting</a></li></ol> <h2 id="introduction">Introduction<a href="#introduction" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h2> <p>AIS Web Portal is a Next.js-based web application designed to visualize and analyze maritime traffic data from Automatic Identification System (AIS) sources. The platform offers powerful tools for tracking vessels, monitoring port service levels, and analyzing maritime activities in real-time.</p> <p>This developer guide provides comprehensive information for developers working on the AIS Web Portal project. It covers the project architecture, setup instructions, core components, and best practices for development.</p> <h2 id="project-architecture">Project Architecture<a href="#project-architecture" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h2> <p>The AIS Web Portal is built using the following tech stack:</p> <ul><li><strong>Frontend Framework</strong>: Next.js 15.x with React 19.x</li> <li><strong>Language</strong>: TypeScript 5.x</li> <li><strong>UI Components</strong>: Mantine, Radix UI, shadcn/ui</li> <li><strong>Map Visualization</strong>: deck.gl, Mapbox GL, react-map-gl</li> <li><strong>Data Handling</strong>: Lodash, date-fns, dayjs</li> <li><strong>Authentication</strong>: JWT-based auth system</li> <li><strong>Deployment</strong>: Docker, Vercel</li></ul> <h3 id="directory-structure">Directory Structure<a href="#directory-structure" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h3> <pre><code class="hljs"><span>ais_web/
</span><span>‚îú‚îÄ‚îÄ .github/            # GitHub Actions workflows
</span><span>‚îú‚îÄ‚îÄ .next/              # Next.js build output
</span><span>‚îú‚îÄ‚îÄ node_modules/       # Dependencies
</span><span>‚îú‚îÄ‚îÄ public/             # Static assets
</span><span>‚îú‚îÄ‚îÄ src/
</span><span>‚îÇ   ‚îú‚îÄ‚îÄ app/            # Next.js app router pages
</span><span>‚îÇ   ‚îú‚îÄ‚îÄ components/     # React components
</span><span>‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ui/         # UI components (shadcn/ui)
</span><span>‚îÇ   ‚îú‚îÄ‚îÄ data/           # Static data files
</span><span>‚îÇ   ‚îú‚îÄ‚îÄ lib/            # Utility libraries
</span><span>‚îÇ   ‚îú‚îÄ‚îÄ resources/      # Resources like images
</span><span>‚îÇ   ‚îú‚îÄ‚îÄ types/          # TypeScript type definitions
</span><span>‚îÇ   ‚îî‚îÄ‚îÄ utils/          # Utility functions
</span><span>‚îú‚îÄ‚îÄ .env                # Environment variables
</span><span>‚îú‚îÄ‚îÄ .env.local          # Local environment variables
</span><span>‚îú‚îÄ‚îÄ .env.production     # Production environment variables
</span><span>‚îú‚îÄ‚îÄ docker-compose.yml  # Docker Compose configuration
</span><span>‚îú‚îÄ‚îÄ Dockerfile          # Docker configuration
</span><span>‚îú‚îÄ‚îÄ next.config.ts      # Next.js configuration
</span><span>‚îú‚îÄ‚îÄ package.json        # Project dependencies
</span><span>‚îî‚îÄ‚îÄ tailwind.config.ts  # Tailwind CSS configuration
</span></code></pre><h2 id="development-environment-setup">Development Environment Setup<a href="#development-environment-setup" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h2> <h3 id="prerequisites">Prerequisites<a href="#prerequisites" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h3> <ul><li>Node.js 18 or later</li> <li>npm, yarn, or pnpm</li> <li>Mapbox API key</li> <li>Backend API endpoint</li></ul> <h3 id="environment-setup">Environment Setup<a href="#environment-setup" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h3> <ol><li><p>Clone the repository:</p> <pre><code class="hljs bash"><span>git <span class="hljs-built_in">clone</span> https://github.com/johngao122/ais-web.git
</span><span><span class="hljs-built_in">cd</span> ais-web
</span></code></pre></li> <li><p>Install dependencies:</p> <pre><code class="hljs bash"><span>npm install
</span><span><span class="hljs-comment"># or</span>
</span><span>yarn install
</span><span><span class="hljs-comment"># or</span>
</span><span>pnpm install
</span></code></pre></li> <li><p>Create a <code class="hljs inline no-lang">.env.local</code> file in the root directory with the following variables:</p> <pre><code class="hljs"><span>NEXT_PUBLIC_MAPBOX=your_mapbox_api_key
</span><span>NEXT_PUBLIC_API=your_api_url
</span></code></pre></li> <li><p>Start the development server:</p> <pre><code class="hljs bash"><span>npm run dev
</span><span><span class="hljs-comment"># or</span>
</span><span>yarn dev
</span><span><span class="hljs-comment"># or</span>
</span><span>pnpm dev
</span></code></pre></li> <li><p>Open <a href="http://localhost:3000">http://localhost:3000</a> in your browser to see the application.</p></li></ol> <h2 id="core-components">Core Components<a href="#core-components" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h2> <h3 id="map-components">Map Components<a href="#map-components" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h3> <p>The map visualization is the central feature of the application, implemented primarily in <code class="hljs inline no-lang">src/components/MapWithSearchbar.tsx</code>. This component integrates:</p> <ul><li><strong>deck.gl</strong> for WebGL-based rendering</li> <li><strong>Mapbox GL</strong> for the base map layer</li> <li><strong>react-map-gl</strong> for React integration</li></ul> <p>Key map-related components:</p> <ul><li><code class="hljs inline no-lang">MapWithSearchbar.tsx</code>: Main map component with search functionality</li> <li><code class="hljs inline no-lang">Map.tsx</code>: Base map component</li> <li><code class="hljs inline no-lang">MapControls.tsx</code>: UI controls for the map (zoom, layers, etc.)</li> <li><code class="hljs inline no-lang">TerminalLayer.tsx</code>: Visualization of port terminals</li></ul> <h3 id="vessel-information-components">Vessel Information Components<a href="#vessel-information-components" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h3> <p>Components for displaying vessel information:</p> <ul><li><code class="hljs inline no-lang">VesselInfoPanel.tsx</code>: Panel showing detailed vessel information</li> <li><code class="hljs inline no-lang">VesselActivityTable.tsx</code>: Table of vessel activities</li> <li><code class="hljs inline no-lang">VesselActivitySingle.tsx</code>: Single vessel activity display</li> <li><code class="hljs inline no-lang">VesselInformationFloatingActionButton.tsx</code>: Floating action button for vessel info</li></ul> <h3 id="port-service-components">Port Service Components<a href="#port-service-components" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h3> <p>Components for port service analysis:</p> <ul><li><code class="hljs inline no-lang">PortServiceTable.tsx</code>: Table of port service metrics</li> <li><code class="hljs inline no-lang">PortServiceLevelFloatingActionButton.tsx</code>: Floating action button for port services</li></ul> <h3 id="ui-components">UI Components<a href="#ui-components" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h3> <p>General UI components:</p> <ul><li><code class="hljs inline no-lang">Searchbar.tsx</code>: Search functionality for vessels</li> <li><code class="hljs inline no-lang">TimeSlider.tsx</code>: Slider for controlling time-based data</li> <li><code class="hljs inline no-lang">DatePicker.tsx</code>: Date selection component</li> <li><code class="hljs inline no-lang">TopBarWithUser.tsx</code>: Top navigation bar with user info</li></ul> <h2 id="data-flow">Data Flow<a href="#data-flow" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h2> <p>The application follows a unidirectional data flow:</p> <ol><li>User interacts with the UI (search, click, filter)</li> <li>Event handlers process the interaction</li> <li>API calls fetch data from the backend</li> <li>State is updated with the new data</li> <li>Components re-render with the updated state</li></ol> <h3 id="state-management">State Management<a href="#state-management" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h3> <p>The application uses React's built-in state management with <code class="hljs inline no-lang">useState</code> and <code class="hljs inline no-lang">useEffect</code> hooks. Key state objects include:</p> <ul><li>Vessel data</li> <li>Map view state</li> <li>Selected vessel information</li> <li>Port service data</li> <li>Time range</li> <li>Filter states</li></ul> <h2 id="api-integration">API Integration<a href="#api-integration" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h2> <p>API integration is handled in <code class="hljs inline no-lang">src/utils/api.ts</code>, which provides functions for:</p> <ul><li>Fetching vessel activity data</li> <li>Fetching port service data</li> <li>Fetching port information</li> <li>Processing and transforming API responses</li></ul> <h3 id="key-api-functions">Key API Functions<a href="#key-api-functions" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h3> <pre><code class="hljs typescript"><span><span class="hljs-comment">// Fetch vessel activity data</span>
</span><span><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> fetchVesselActivity = <span class="hljs-keyword">async</span> (
</span><span>    params: VesselActivityRequest
</span><span>): <span class="hljs-built_in">Promise</span>&lt;VesselActivity[]&gt;
</span><span>
</span><span><span class="hljs-comment">// Fetch port service data</span>
</span><span><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> fetchPortService = <span class="hljs-keyword">async</span> (
</span><span>    params: PortServiceRequest[]
</span><span>): <span class="hljs-built_in">Promise</span>&lt;PortServiceData&gt;
</span><span>
</span><span><span class="hljs-comment">// Fetch port information</span>
</span><span><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> fetchPortInfo = <span class="hljs-keyword">async</span> (
</span><span>    params: PortInfoRequest[]
</span><span>): <span class="hljs-built_in">Promise</span>&lt;PortInfoData&gt;
</span></code></pre><h2 id="authentication">Authentication<a href="#authentication" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h2> <p>Authentication is managed in <code class="hljs inline no-lang">src/utils/auth.ts</code>, which provides:</p> <ul><li>Token management (storage, retrieval, refresh)</li> <li>User session handling</li> <li>Login/logout functionality</li></ul> <h3 id="key-authentication-functions">Key Authentication Functions<a href="#key-authentication-functions" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h3> <pre><code class="hljs typescript"><span><span class="hljs-comment">// Get the current user's token</span>
</span><span><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> getUserToken = (): <span class="hljs-built_in">string</span> | <span class="hljs-literal">null</span>
</span><span>
</span><span><span class="hljs-comment">// Set up token refresh interval</span>
</span><span><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> setupTokenRefresh = ()
</span><span>
</span><span><span class="hljs-comment">// Clear token refresh interval</span>
</span><span><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> clearTokenRefresh = ()
</span><span>
</span><span><span class="hljs-comment">// Sync user data between localStorage and sessionStorage</span>
</span><span><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> syncStorageOnLoad = ()
</span></code></pre><h2 id="map-visualization">Map Visualization<a href="#map-visualization" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h2> <p>The map visualization is built using deck.gl and Mapbox GL. Key features include:</p> <h3 id="layers">Layers<a href="#layers" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h3> <ul><li><strong>IconLayer</strong>: For vessel markers</li> <li><strong>PathLayer</strong>: For vessel paths</li> <li><strong>PolygonLayer</strong>: For areas like terminals and separation zones</li></ul> <h3 id="interactions">Interactions<a href="#interactions" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h3> <ul><li>Panning and zooming</li> <li>Clicking on vessels for details</li> <li>Hovering for tooltips</li> <li>Time-based animation</li></ul> <h3 id="example-creating-a-vessel-layer">Example: Creating a Vessel Layer<a href="#example-creating-a-vessel-layer" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h3> <pre><code class="hljs typescript"><span><span class="hljs-keyword">const</span> vesselLayer = <span class="hljs-keyword">new</span> IconLayer({
</span><span>    <span class="hljs-attr">id</span>: <span class="hljs-string">&quot;vessel-layer&quot;</span>,
</span><span>    <span class="hljs-attr">data</span>: filteredVesselData,
</span><span>    <span class="hljs-attr">pickable</span>: <span class="hljs-literal">true</span>,
</span><span>    <span class="hljs-attr">iconAtlas</span>: vesselMarker.src,
</span><span>    <span class="hljs-attr">iconMapping</span>: {
</span><span>        <span class="hljs-attr">marker</span>: { <span class="hljs-attr">x</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">128</span>, <span class="hljs-attr">height</span>: <span class="hljs-number">128</span>, <span class="hljs-attr">mask</span>: <span class="hljs-literal">true</span> },
</span><span>    },
</span><span>    <span class="hljs-attr">getIcon</span>: <span class="hljs-function">(<span class="hljs-params">d</span>) =&gt;</span> <span class="hljs-string">&quot;marker&quot;</span>,
</span><span>    <span class="hljs-attr">sizeScale</span>: <span class="hljs-number">15</span>,
</span><span>    <span class="hljs-attr">getPosition</span>: <span class="hljs-function">(<span class="hljs-params">d</span>) =&gt;</span> [d.longitude, d.latitude],
</span><span>    <span class="hljs-attr">getSize</span>: <span class="hljs-function">(<span class="hljs-params">d</span>) =&gt;</span> (d.mmsi === selectedVessel?.mmsi ? <span class="hljs-number">2</span> : <span class="hljs-number">1</span>),
</span><span>    <span class="hljs-attr">getColor</span>: <span class="hljs-function">(<span class="hljs-params">d</span>) =&gt;</span> getVesselColor(d),
</span><span>    <span class="hljs-attr">onHover</span>: createHoverHandler(<span class="hljs-string">&quot;vessel&quot;</span>),
</span><span>});
</span></code></pre><h2 id="state-management-2">State Management<a href="#state-management-2" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h2> <p>The application uses React's built-in state management with hooks. For complex components like <code class="hljs inline no-lang">MapWithSearchbar.tsx</code>, multiple state variables are used to manage different aspects of the application:</p> <pre><code class="hljs typescript"><span><span class="hljs-comment">// View state for the map</span>
</span><span><span class="hljs-keyword">const</span> [viewState, setViewState] = useState(initialViewState);
</span><span>
</span><span><span class="hljs-comment">// Vessel data</span>
</span><span><span class="hljs-keyword">const</span> [vesselData, setVesselData] = useState&lt;VesselActivity[]&gt;([]);
</span><span><span class="hljs-keyword">const</span> [filteredVesselData, setFilteredVesselData] = useState&lt;VesselActivity[]&gt;(
</span><span>    []
</span><span>);
</span><span>
</span><span><span class="hljs-comment">// Selected vessel</span>
</span><span><span class="hljs-keyword">const</span> [selectedVessel, setSelectedVessel] = useState&lt;VesselActivity | <span class="hljs-literal">null</span>&gt;(
</span><span>    <span class="hljs-literal">null</span>
</span><span>);
</span><span>
</span><span><span class="hljs-comment">// UI states</span>
</span><span><span class="hljs-keyword">const</span> [isLoading, setIsLoading] = useState(<span class="hljs-literal">false</span>);
</span><span><span class="hljs-keyword">const</span> [error, setError] = useState&lt;<span class="hljs-built_in">string</span> | <span class="hljs-literal">null</span>&gt;(<span class="hljs-literal">null</span>);
</span></code></pre><h2 id="testing">Testing<a href="#testing" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h2> <p>The project uses Vitest for testing. Tests are located in <code class="hljs inline no-lang">src/utils/__tests__/</code> directory.</p> <p>To run tests:</p> <pre><code class="hljs bash"><span>npm run <span class="hljs-built_in">test</span>
</span><span><span class="hljs-comment"># or</span>
</span><span>yarn <span class="hljs-built_in">test</span>
</span></code></pre><h2 id="deployment">Deployment<a href="#deployment" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h2> <h3 id="docker-deployment">Docker Deployment<a href="#docker-deployment" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h3> <p>The project includes Docker configuration for containerized deployment:</p> <ol><li><p>Build the Docker image:</p> <pre><code class="hljs bash"><span>docker build \
</span><span>  --build-arg NEXT_PUBLIC_MAPBOX=<span class="hljs-string">&quot;your_mapbox_api_key&quot;</span> \
</span><span>  --build-arg NEXT_PUBLIC_API=<span class="hljs-string">&quot;your_api_url&quot;</span> \
</span><span>  -t johngao122/ais-web-portal:latest .
</span></code></pre></li> <li><p>Run with Docker Compose:</p> <pre><code class="hljs bash"><span>docker-compose up
</span></code></pre></li></ol> <h3 id="vercel-deployment">Vercel Deployment<a href="#vercel-deployment" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h3> <p>The project is configured for deployment on Vercel:</p> <ol><li>Connect your GitHub repository to Vercel</li> <li>Configure environment variables in Vercel dashboard</li> <li>Deploy the application</li></ol> <h2 id="best-practices">Best Practices<a href="#best-practices" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h2> <h3 id="code-style">Code Style<a href="#code-style" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h3> <ul><li>Use TypeScript for type safety</li> <li>Follow the component structure in the <code class="hljs inline no-lang">src/components</code> directory</li> <li>Add JSDoc comments for component documentation</li> <li>Use the UI components from the shadcn/ui library when possible</li></ul> <h3 id="performance-optimization">Performance Optimization<a href="#performance-optimization" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h3> <ul><li>Use React.memo for components that don't need frequent re-renders</li> <li>Implement virtualization for large lists (e.g., vessel tables)</li> <li>Optimize deck.gl layers for better rendering performance</li> <li>Use useMemo and useCallback hooks to prevent unnecessary recalculations</li></ul> <h3 id="state-management-3">State Management<a href="#state-management-3" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h3> <ul><li>Keep state as local as possible</li> <li>Use context for global state when necessary</li> <li>Consider using React Query for API data fetching and caching</li></ul> <h2 id="troubleshooting">Troubleshooting<a href="#troubleshooting" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h2> <h3 id="common-issues">Common Issues<a href="#common-issues" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h3> <ol><li><p><strong>Map not loading</strong></p> <ul><li>Check if Mapbox API key is correctly set in .env.local</li> <li>Verify that the Mapbox script is loaded correctly</li></ul></li> <li><p><strong>API connection issues</strong></p> <ul><li>Verify API URL in .env.local</li> <li>Check network tab for specific error responses</li> <li>Ensure authentication token is valid</li></ul></li> <li><p><strong>Performance issues</strong></p> <ul><li>Reduce the number of deck.gl layers</li> <li>Implement data filtering to reduce the number of rendered elements</li> <li>Use React.memo and useMemo for optimization</li></ul></li></ol> <h3 id="debugging">Debugging<a href="#debugging" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h3> <ul><li>Use React DevTools for component inspection</li> <li>Check browser console for errors</li> <li>Use the Network tab to inspect API calls</li> <li>Add console.log statements for debugging specific issues</li></ul> <hr> <p>This developer guide provides a comprehensive overview of the AIS Web Portal project. For more detailed information, refer to the codebase and comments within the source files.</p></div> <nav id="page-nav" data-v-e6005420><div class="nav-component slim-scroll" data-v-e6005420></div> <!----></nav> <div aria-hidden="true" class="scroll-top-button fa-lg d-print-none" style="display:none;bottom:2%;right:2%;position:fixed;"><i class="fas fa-arrow-circle-up"></i></div></div> <footer><div class="text-center"><small>AIS Web Portal Documentation | [Generated by <a href="https://markbind.org/">MarkBind 5.5.3</a>]</small></div></footer></div>
</body><script src="/AIS-Web-Portal/markbind/js/bootstrap-utility.min.js"></script>
<script src="/AIS-Web-Portal/markbind/js/polyfill.min.js"></script>
<script src="/AIS-Web-Portal/markbind/js/vue.min.js"></script>
<script src="/AIS-Web-Portal/markbind/js/markbind.min.js"></script>
<script src="/AIS-Web-Portal/DEVELOPER_GUIDE.page-vue-render.js"></script>
<script>
  MarkBind.setupWithSearch()
</script>
</html>
